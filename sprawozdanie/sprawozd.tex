%@descr: wzór sprawozdania, raportu lub pracy - nadaje siê do przeróbek
%@author: Maciej Komosiñski

\documentclass{article} 
\usepackage{polski} %moze wymagac dokonfigurowania latexa, ale jest lepszy ni¿ standardowy babel'owy [polish] 
\usepackage[cp1250]{inputenc} 
\usepackage[OT4]{fontenc} 
\usepackage{graphicx,color} %include pdf's (and png's for raster graphics... avoid raster graphics!) 
\usepackage{url} 
\usepackage[pdftex,hyperfootnotes=false,pdfborder={0 0 0}]{hyperref} %za wszystkimi pakietami; pdfborder nie wszedzie tak samo zaimplementowane bo specyfikacja nieprecyzyjna; pod miktex'em po prostu nie widac wtedy ramek
\usepackage{float}

\input{_ustawienia.tex}

%\title{Sprawozdanie z laboratorium:\\Metaheurystyki i Obliczenia Inspirowane Biologicznie}
%\author{}
%\date{}


\begin{document}

\input{_tytulowa}



\section{Wstêp}
Problem komiwoja¿era opisywany jest czêsto jako problem wêdrownego sprzedawcy zamierzaj¹cego odwiedziæ pewien zbiór miast. Planuj¹c swoj¹ podró¿, usi³uje on znaleŸæ mo¿liwie najkrótsz¹ trasê, która koñczy³aby siê w punkcie startowym. Zak³ada siê, ¿e ka¿de miasto z wyj¹tkiem pocz¹tkowego, powinno zostaæ odwiedzone tylko jeden raz. Przyjmuje siê równie¿, ¿e ka¿da para miast, po³¹czona jest drog¹ o okreœlonej d³ugoœci.  Opis ten stanowi jedynie ilustracjê  ogólniejszego zagadnienia. Zapisuj¹c problem Komiwoja¿era w jêzyku teorii grafów, mo¿na zdefiniowaæ go, jako problem znajdowania takiego cyklu Hamiltona w pe³nym grafie wa¿onym, dla którego suma wag odwiedzonych krawêdzi jest minimalna. W tak zdefiniowanym problemie mo¿na wyró¿niæ Asymetryczny problem Komiwoja¿era (ATSP). Zak³ada siê w nim, ¿e odleg³oœæ pomiêdzy dwoma miastami A i B mo¿e byæ ró¿na w zale¿noœci od tego, czy sprzedawca przemieszcza siê z punktu A do B, czy te¿ w kierunku przeciwnym. Zarówno symetryczna jak i asymetryczna wersja problemu komiwoja¿era znalaz³a bardzo szerokie zastosowanie w praktyce. Wykorzystywana jest nie tylko w dziedzinach zwi¹zanych z transportem. Problem komiwoja¿era stosowany jest miêdzy innymi w produkcji elektroniki, gdzie optymalizuje siê drogê lasera wypalaj¹cego obwody elektroniczne. W sieciach komputerowych zastosowany jest do optymalizacji tras routingu. Niestety opisywany problem, jest problemem o wyk³adniczej z³o¿onoœci obliczeniowej i nale¿y do klasy problemów NP-trudnych.
\section{Operator s¹siedztwa}
W zaimplementowanych przez nas algorytmach wykorzystaliœmy operator s¹siedztwa 2-opt. W podejœciu tym, ka¿da permutacja oznaczaj¹ca kolejnoœæ odwiedzanych wierzcho³ków w grafie s¹siaduje z permutacjami utworzonymi poprzez zamianê miejscami dwóch liczb w sekwencji.  

\section{Porównanie dzia³ania 4 algorytmów i rodzajów s¹siedztw na wszystkich instancjach problemów}
\subsection{Odleg³oœæ od optimum.}
\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/best_results_distance_from_optimum2.pdf}
\end{center}
\caption{Odleg³oœci od optimum najlepszych znalezionych rozwi¹zañ dla kilku przyk³adowych algorytmów. }
\label{fig-schemat}
\end{figure}
\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/avarage_results_distance_from_optimum2.pdf}
\end{center}
\caption{Odleg³oœci od optimum wartoœci œrednich ze znalezionych rozwi¹zañ dla kilku przyk³adowych algorytmów. }
\label{fig-schemat}
\end{figure}

Jak widaæ na za³¹czonych wykresach w kontekœcie wzglêdnej odleg³oœci od optimum ( liczonej jako odleg³oœæ najlepszego wyniku od optimum podzielonego przez optimum ) algorytmy greedy i steepest maj¹ bardzo zbli¿one rezultaty. Najgorszymi natomiast okaza³y siê byæ algorytmy losowe, zwracaj¹ce losow¹ permutacjê, dzia³aj¹ce tak d³ugo jak odpowiednio greedy i steepest. Widzimy wiêc, ¿e proste heurystyki wypadaj¹ znacznie gorzej ni¿ podejœcia greedy i steepest.


\subsection{Porównanie czasu dzia³ania algorytmów.}
\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/time.pdf}
\end{center}
\caption{Porównanie œrednich czasów dzia³ania algorytmów. }
\label{fig-schemat}
\end{figure}

Jednak¿e dobre rezultaty obarczone s¹ d³ugimi czasami dzia³ania algorytmów greedy i steepest. Wszystkie proste Heurystyki maj¹ niewielki wp³yw rozmiaru instancji na czas dzia³ania. Natomiast w greedym i steepeœcie rozmiar odgrywa kluczow¹ rolê w tej kwestii.


\subsection{Porównanie efektywnoœci algorytmów.}
\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/efficiency2log.pdf}
\end{center}
\caption{Porównanie efektywnoœci algorytmów.}
\label{fig-schemat}
\end{figure}

\subsection{Porównanie œredniej liczby kroków dla algorytmów steepest i greedy.}
\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/avg_steps.pdf}
\end{center}
\caption{Porównanie œredniej liczby kroków algorytmów greedy i steepest w zale¿noœci od rozmiaru instancji problemu.}
\label{fig-schemat}
\end{figure}
Rozbie¿noœæ tych wykresów jest doœæ oczywista. Steepest zawsze przegl¹da ca³e s¹siedztwo w poszukiwaniu optimum, greedy natomiast tylko jego fragment, próbuj¹æ uzyskaæ poprawê wyniku.


\section{Jakoœæ rozwi¹zania koñcowego w zale¿noœci od jakoœci rozwi¹zania pocz¹tkowego.}
\subsection{Instancja p43.}


\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/best-vs-first/p43-greedy-efficiency.pdf}
\end{center}
\caption{Odleg³oœci od optimum rozwi¹zañ koñcowych w zale¿noœci od odleg³oœci od optimum rozwi¹zañ pocz¹tkowych. Instancja p43 - algorytm Greedy}
\label{fig-schemat}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/best-vs-first/p43-steepest-efficiency.pdf}
\end{center}
\caption{Odleg³oœci od optimum rozwi¹zañ koñcowych w zale¿noœci od odleg³oœci od optimum rozwi¹zañ pocz¹tkowych. Instancja p43 - algorytm Steepest}
\label{fig-schemat}
\end{figure}

\subsection{Instancja ft53.}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/best-vs-first/ft53-greedy-efficiency.pdf}
\end{center}
\caption{Odleg³oœci od optimum rozwi¹zañ koñcowych w zale¿noœci od odleg³oœci od optimum rozwi¹zañ pocz¹tkowych. Instancja ft53 - algorytm Greedy}
\label{fig-schemat}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/best-vs-first/ft53-steepest-efficiency.pdf}
\end{center}
\caption{Odleg³oœci od optimum rozwi¹zañ koñcowych w zale¿noœci od odleg³oœci od optimum rozwi¹zañ pocz¹tkowych. Instancja ft53 - algorytm Steepest}
\label{fig-schemat}
\end{figure}


\subsection{Instancja ry48p.}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/best-vs-first/ry48p-greedy-efficiency.pdf}
\end{center}
\caption{Odleg³oœci od optimum rozwi¹zañ koñcowych w zale¿noœci od odleg³oœci od optimum rozwi¹zañ pocz¹tkowych. Instancja ry48p - algorytm Greedy}
\label{fig-schemat}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/best-vs-first/ry48p-steepest-efficiency.pdf}
\end{center}
\caption{Odleg³oœci od optimum rozwi¹zañ koñcowych w zale¿noœci od odleg³oœci od optimum rozwi¹zañ pocz¹tkowych. Instancja ry48p - algorytm Steepest}
\label{fig-schemat}
\end{figure}


Ka¿dy wykres pokazuje nam, ¿e zawsze koñczymy w rezultacie lepszym ni¿ ten z którego zaczynaliœmy podró¿. Dwa z trzech przypadkó³ nie daje ciekawych zale¿noœci, jednak¿e warto spojrzeæ na p43. Tworz¹ siê tam klastry œci¹gaj¹ce podobne rozwi¹zania pocz¹tkowe do podobnych rozwi¹zañ koñcowych.

\section{Zale¿noœæ œrednich i najlepszych rozwi¹zañ od liczby restartów algorytmu. }

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/multisteepest_ftv44.png}
\end{center}
\caption{Zale¿noœæ œrednich i najlepszych rozwi¹zañ od liczby restartów algorytmu - steepest dla pliku ftv44}
\label{fig-schemat}
\end{figure}


\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/multigreedy_ftv44.png}
\end{center}
\caption{Zale¿noœæ œrednich i najlepszych rozwi¹zañ od liczby restartów algorytmu - greedy dla pliku ftv44}
\label{fig-schemat}
\end{figure}




\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/multisteepest_p43.png}
\end{center}
\caption{Zale¿noœæ œrednich i najlepszych rozwi¹zañ od liczby restartów algorytmu - steepest dla pliku p43}
\label{fig-schemat}
\end{figure}

\begin{figure}[H]
\begin{center}
\includegraphics[width=1.0\textwidth]{diagrams/multigreedy_p43.png}
\end{center}
\caption{Zale¿noœæ œrednich i najlepszych rozwi¹zañ od liczby restartów algorytmu - greedy dla pliku p43}
\label{fig-schemat}
\end{figure}

Wykresy pokazuj¹ nam, ¿e sytuacja doœæ mocno zale¿y od zadanej instancji. W przypadku p43 ju¿ po kilku iteracjach osi¹gamy okolice optimum poni¿ej którego zejœæ nie mo¿na. W przypadku ftv44 mamy doœæ du¿e wahania rozwi¹zañ miêdzy s¹siednimi punktami ( wynikaj¹ce z faktu, ¿e rzadko trafiamy na dobry trop i wchodzimy w wartoœciowe œcie¿ki ). Dla wersji steepest w ftv44 widaæ mocny trend poprawy rozwi¹zania w przedziale od 1 do ok 100 uruchomieñ. Dla wiêkszych wartoœci nie da siê zaobserwowaæ ju¿ tak znacznych ró¿nic. W przypadku greedy ftv44 istnieje ci¹g³y trend polepszaj¹cy ju¿ istniej¹ce wyniki, jednak o mniejszym nachyleniu. Ponadto zawsze op³aca siê puœciæ kilka razy algorytm,  widaæ, ¿e wiêkszoœæ ( poza kilkoma pocz¹tkowymi ) najlepszymi rozwi¹zaniami jest zdecydowanie lepsza ni¿ œrednia arytmetyczn¹ wszystkich rozwi¹zañ w serii. Warto te¿ mieæ na uwadze, ¿e w pewnym momencie zyski zaczynaj¹ zdecydowanie maleæ, natomiast czas potrzebny na ponowne odpalenia algorytmów roœnie, przez co musimy siê zdecydowaæ na decyzjê jakoœæ vs czas.

\section{Obiektywna ocena podobieñstwa znajdowanych rozwi¹zañ lokalnie optymalnych dla dwóch wybranych instancji}


\begin{table}[H]
\begin{tabular}{|l|llllllllll|}
\hline
   & 1    & 2    & 3    & 4    & 5    & 6    & 7    & 8    & 9    & 10   \\ \hline
1  & 1    & 0.15 & 0.16 & 0.14 & 0.17 & 0.16 & 0.16 & 0.16 & 0.15 & 0.13 \\
2  & 0.15 & 1    & 0.16 & 0.18 & 0.15 & 0.17 & 0.16 & 0.15 & 0.16 & 0.17 \\
3  & 0.16 & 0.16 & 1    & 0.17 & 0.16 & 0.17 & 0.19 & 0.16 & 0.17 & 0.17 \\
4  & 0.14 & 0.18 & 0.17 & 1    & 0.19 & 0.19 & 0.17 & 0.16 & 0.15 & 0.17 \\
5  & 0.17 & 0.15 & 0.16 & 0.19 & 1    & 0.16 & 0.16 & 0.16 & 0.15 & 0.15 \\
6  & 0.16 & 0.17 & 0.17 & 0.19 & 0.16 & 1    & 0.2  & 0.18 & 0.15 & 0.17 \\
7  & 0.16 & 0.16 & 0.19 & 0.17 & 0.16 & 0.2  & 1    & 0.18 & 0.19 & 0.14 \\
8  & 0.16 & 0.15 & 0.16 & 0.16 & 0.16 & 0.18 & 0.18 & 1    & 0.18 & 0.18 \\
9  & 0.15 & 0.16 & 0.17 & 0.15 & 0.15 & 0.15 & 0.19 & 0.18 & 1    & 0.16 \\
10 & 0.13 & 0.17 & 0.17 & 0.17 & 0.15 & 0.17 & 0.14 & 0.18 & 0.16 & 1    \\ \hline
\end{tabular}
\caption{Macierz podobieñstwa dziesiêciu rozwi¹zañ stanowi¹cych optima lokalne - zbiór rbg443}
\label{fig-schemat}
\end{table}

\begin{table}[h]
\begin{tabular}{|l|llllllllll|}
\hline
   & 1    & 2    & 3    & 4    & 5    & 6    & 7    & 8    & 9    & 10   \\ \hline
1  & 1    & 0.17 & 0.17 & 0.15 & 0.16 & 0.18 & 0.15 & 0.16 & 0.16 & 0.17 \\
2  & 0.17 & 1    & 0.16 & 0.13 & 0.16 & 0.17 & 0.17 & 0.15 & 0.16 & 0.15 \\
3  & 0.17 & 0.16 & 1    & 0.16 & 0.2  & 0.18 & 0.17 & 0.15 & 0.17 & 0.17 \\
4  & 0.15 & 0.13 & 0.16 & 1    & 0.17 & 0.15 & 0.19 & 0.18 & 0.16 & 0.17 \\
5  & 0.16 & 0.16 & 0.2  & 0.17 & 1    & 0.17 & 0.17 & 0.15 & 0.17 & 0.14 \\
6  & 0.18 & 0.17 & 0.18 & 0.15 & 0.17 & 1    & 0.15 & 0.15 & 0.17 & 0.15 \\
7  & 0.15 & 0.17 & 0.17 & 0.19 & 0.17 & 0.15 & 1    & 0.14 & 0.16 & 0.16 \\
8  & 0.16 & 0.15 & 0.15 & 0.18 & 0.15 & 0.15 & 0.14 & 1    & 0.16 & 0.17 \\
9  & 0.16 & 0.16 & 0.17 & 0.16 & 0.17 & 0.17 & 0.16 & 0.16 & 1    & 0.17 \\
10 & 0.17 & 0.15 & 0.17 & 0.17 & 0.14 & 0.15 & 0.16 & 0.17 & 0.17 & 1    \\ \hline
\end{tabular}
\caption{Macierz podobieñstwa dziesiêciu rozwi¹zañ stanowi¹cych optima lokalne - zbiór rbg403}
\label{fig-schemat}
\end{table}

Powy¿sze tabele zawieraj¹ oceny podobieñstwa permutacji bêd¹cych rozwi¹zaniami znalezionymi za pomoc¹ dziesiêciokrotnego odpalenia algorytmu steepest dla zbiorów rbg443 oraz rbg403. Jako miarê podobieñstwa przyjêto liczbê wyst¹pieñ takich samych par s¹siadów w obu sekwencjach, podzielon¹ przez d³ugoœæ permutacji. 
Jak mo¿na zauwa¿yæ, podobieñstwo pomiêdzy znalezionymi rozwi¹zaniami jest niewielkie. Rozwi¹zania ró¿ni¹ siê od siebie w bardzo du¿ym stopniu.

\section{Wnioski}

\section{Napotkane trudnoœci}

\section{Uzasadnienie wprowadzanych ulepszeñ, propozycje udoskonaleñ i ich spodziewane efekty}

%%%%%%%%%%%%%%%% literatura %%%%%%%%%%%%%%%%

\bibliography{sprawozd}
\bibliographystyle{plain}


\end{document}

